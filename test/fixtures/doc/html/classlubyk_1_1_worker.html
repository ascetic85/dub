<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>lubyk: lubyk::Worker Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">lubyk
   &#160;<span id="projectnumber">0.5</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacelubyk.html">lubyk</a>      </li>
      <li class="navelem"><a class="el" href="classlubyk_1_1_worker.html">Worker</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">lubyk::Worker Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="lubyk::Worker" -->
<p><code>#include &lt;<a class="el" href="worker_8h_source.html">worker.h</a>&gt;</code></p>

<p><a href="classlubyk_1_1_worker-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#ac1292772bf4542529d6269b1a2472de0">Worker</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a1bdf2c96c1795dab045048e8a4df5f4d">~Worker</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lk_2include_2lk_2_socket_8h.html#a038a308a5e7246ac41ca22c43d7209d1">LuaStackSize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#ac48f75f520b80c71309ae6d11bd36fda">spawn</a> (const char *script, lua_State *L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a8bcd915adf91628ce61f79237e3cdfa7">execute</a> (const char *cmd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a86d62dd649b8e068bbd191dd771bdffb">waitpid</a> (int pid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a4f6851edb92f8746e6e0a792896a6073">exit</a> (int <a class="el" href="cv_8h.html#ae17b3c2584dab511e91d1c96644018bf">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lk_2include_2lk_2_socket_8h.html#a038a308a5e7246ac41ca22c43d7209d1">LuaStackSize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a4385c537c01d83f316403d86df08ecc5">execPath</a> (lua_State *L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a92a1d4871e431092b4ba252903402ad6">run</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a94b0ab5968283fe3dda40e8f23d6ef77">now</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classlubyk_1_1_worker.html">Worker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a81cce09f94da9a5ba0c387b9e786374e">getWorker</a> (lua_State *L)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlubyk_1_1_time_ref.html">TimeRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a5006508788964ce90a177c690b02cfb2">time_ref_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a4068e8972c5fce50a60aaf9b37c614fa">zmq_context_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a0bc70f22a0ef1b6599639171828b590b">zmq_context_refcount_</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#adcecfdc90d287b120b593d3942f89138">doExecute</a> (<a class="el" href="classlubyk_1_1_thread.html">Thread</a> *runner)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Implementation *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlubyk_1_1_worker.html#a87597039e4a4f7acd2ef0ccc0574ac83">impl_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The worker should be created only once and is responsible for timing and lua locking.</p>
<dl class="user"><dt><b>Bindings info:</b></dt><dd>string_format:'%f' string_args:'(*userdata)-&gt;<a class="el" href="classlubyk_1_1_worker.html#a94b0ab5968283fe3dda40e8f23d6ef77">elapsed()</a>' </dd></dl>

<p>Definition at line <a class="el" href="worker_8h_source.html#l00056">56</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac1292772bf4542529d6269b1a2472de0"></a><!-- doxytag: member="lubyk::Worker::Worker" ref="ac1292772bf4542529d6269b1a2472de0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lubyk::Worker::Worker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="worker_8h_source.html#l00099">execute()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bdf2c96c1795dab045048e8a4df5f4d"></a><!-- doxytag: member="lubyk::Worker::~Worker" ref="a1bdf2c96c1795dab045048e8a4df5f4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lubyk::Worker::~Worker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="adcecfdc90d287b120b593d3942f89138"></a><!-- doxytag: member="lubyk::Worker::doExecute" ref="adcecfdc90d287b120b593d3942f89138" args="(Thread *runner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lubyk::Worker::doExecute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlubyk_1_1_thread.html">Thread</a> *&#160;</td>
          <td class="paramname"><em>runner</em></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="worker_8h_source.html#l00208">208</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>References <a class="el" href="thread_8h_source.html#l00217">lubyk::Thread::parameter_</a>, and <a class="el" href="thread_8h_source.html#l00202">lubyk::Thread::threadReady()</a>.</p>

<p>Referenced by <a class="el" href="worker_8h_source.html#l00099">execute()</a>.</p>

</div>
</div>
<a class="anchor" id="a4385c537c01d83f316403d86df08ecc5"></a><!-- doxytag: member="lubyk::Worker::execPath" ref="a4385c537c01d83f316403d86df08ecc5" args="(lua_State *L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lk_2include_2lk_2_socket_8h.html#a038a308a5e7246ac41ca22c43d7209d1">LuaStackSize</a> lubyk::Worker::execPath </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the current executable's path. </p>

</div>
</div>
<a class="anchor" id="a8bcd915adf91628ce61f79237e3cdfa7"></a><!-- doxytag: member="lubyk::Worker::execute" ref="a8bcd915adf91628ce61f79237e3cdfa7" args="(const char *cmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lubyk::Worker::execute </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute a system command in a new thread </p>

<p>Definition at line <a class="el" href="worker_8h_source.html#l00099">99</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>References <a class="el" href="worker_8h_source.html#l00208">doExecute()</a>, <a class="el" href="thread_8h_source.html#l00055">lubyk::Thread::startThread()</a>, and <a class="el" href="classlubyk_1_1_worker.html#ac1292772bf4542529d6269b1a2472de0">Worker()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f6851edb92f8746e6e0a792896a6073"></a><!-- doxytag: member="lubyk::Worker::exit" ref="a4f6851edb92f8746e6e0a792896a6073" args="(int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lubyk::Worker::exit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Exit with a given status. </p>

</div>
</div>
<a class="anchor" id="a81cce09f94da9a5ba0c387b9e786374e"></a><!-- doxytag: member="lubyk::Worker::getWorker" ref="a81cce09f94da9a5ba0c387b9e786374e" args="(lua_State *L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classlubyk_1_1_worker.html">Worker</a>* lubyk::Worker::getWorker </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>For testing purpose. </p>

</div>
</div>
<a class="anchor" id="a94b0ab5968283fe3dda40e8f23d6ef77"></a><!-- doxytag: member="lubyk::Worker::now" ref="a94b0ab5968283fe3dda40e8f23d6ef77" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double lubyk::Worker::now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="worker_8h_source.html#l00118">118</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>References <a class="el" href="classlubyk_1_1_time_ref.html#ae3e086e19a5464c5074ba1096cc1ae1a">lubyk::TimeRef::elapsed()</a>, and <a class="el" href="worker_8h_source.html#l00064">time_ref_</a>.</p>

</div>
</div>
<a class="anchor" id="a92a1d4871e431092b4ba252903402ad6"></a><!-- doxytag: member="lubyk::Worker::run" ref="a92a1d4871e431092b4ba252903402ad6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lubyk::Worker::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac48f75f520b80c71309ae6d11bd36fda"></a><!-- doxytag: member="lubyk::Worker::spawn" ref="ac48f75f520b80c71309ae6d11bd36fda" args="(const char *script, lua_State *L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lk_2include_2lk_2_socket_8h.html#a038a308a5e7246ac41ca22c43d7209d1">LuaStackSize</a> lubyk::Worker::spawn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>script</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start a new process with the given Lua script. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>new process id or nil on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a86d62dd649b8e068bbd191dd771bdffb"></a><!-- doxytag: member="lubyk::Worker::waitpid" ref="a86d62dd649b8e068bbd191dd771bdffb" args="(int pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lubyk::Worker::waitpid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait for another process to finish (BLOCKING). </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a87597039e4a4f7acd2ef0ccc0574ac83"></a><!-- doxytag: member="lubyk::Worker::impl_" ref="a87597039e4a4f7acd2ef0ccc0574ac83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Implementation* <a class="el" href="classlubyk_1_1_worker.html#a87597039e4a4f7acd2ef0ccc0574ac83">lubyk::Worker::impl_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="worker_8h_source.html#l00058">58</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5006508788964ce90a177c690b02cfb2"></a><!-- doxytag: member="lubyk::Worker::time_ref_" ref="a5006508788964ce90a177c690b02cfb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlubyk_1_1_time_ref.html">TimeRef</a> <a class="el" href="classlubyk_1_1_worker.html#a5006508788964ce90a177c690b02cfb2">lubyk::Worker::time_ref_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Time reference. All times are in milliseconds (as double) from this reference. 0.0 = The worker's birthdate ! </p>

<p>Definition at line <a class="el" href="worker_8h_source.html#l00064">64</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>Referenced by <a class="el" href="worker_8h_source.html#l00118">elapsed()</a>.</p>

</div>
</div>
<a class="anchor" id="a4068e8972c5fce50a60aaf9b37c614fa"></a><!-- doxytag: member="lubyk::Worker::zmq_context_" ref="a4068e8972c5fce50a60aaf9b37c614fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="classlubyk_1_1_worker.html#a4068e8972c5fce50a60aaf9b37c614fa">lubyk::Worker::zmq_context_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>These sets contain the bitfields set by fdSet methods. These sets contain the bitfields after the select operation. Stores the maximum value of all fd sets. Context use by <a class="el" href="classzmq_1_1_socket.html">zmq::Socket</a>. </p>

<p>Definition at line <a class="el" href="worker_8h_source.html#l00080">80</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>Referenced by <a class="el" href="zmq_2include_2zmq_2_socket_8h_source.html#l00070">zmq::Socket::Socket()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bc70f22a0ef1b6599639171828b590b"></a><!-- doxytag: member="lubyk::Worker::zmq_context_refcount_" ref="a0bc70f22a0ef1b6599639171828b590b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classlubyk_1_1_worker.html#a0bc70f22a0ef1b6599639171828b590b">lubyk::Worker::zmq_context_refcount_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counts the number of <a class="el" href="classzmq_1_1_socket.html">zmq::Socket</a> depending on the socket. </p>

<p>Definition at line <a class="el" href="worker_8h_source.html#l00085">85</a> of file <a class="el" href="worker_8h_source.html">worker.h</a>.</p>

<p>Referenced by <a class="el" href="zmq_2include_2zmq_2_socket_8h_source.html#l00070">zmq::Socket::Socket()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/gaspard/git/lubyk/modules/lubyk/include/lubyk/<a class="el" href="worker_8h_source.html">worker.h</a></li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 8 2011 15:43:34 for lubyk by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
