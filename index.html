<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Dub by lubyk</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Dub</h1>
        <p>A Lua bindings generator that uses Doxygen parsed C/C++ code.</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/lubyk/dub" class="button fork"><strong>Fork On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/lubyk/dub/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/lubyk/dub/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>

      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h3>Dub documentation</h3>

<h1>Dub (Doxygen based Ubiquitous Binder)</h1>

<p>This is a tool to ease the creation of scripting language bindings for a C++ library.
It was initially developed to create the OpenCV bindings for Lua in Lubyk (<a href="http://lubyk.org">http://lubyk.org</a>).</p>

<p>The generator uses the xml output from Doxygen to avoid parsing C++ code by itself.</p>

<p>Homepage: <a href="http://lubyk.org/en/project311.html">lubyk/dub</a></p>

<p>Please donate so we can free up some time to write good documentation...</p>

<p><a href="http://www.pledgie.com/campaigns/17041"><img src="https://www.pledgie.com/campaigns/17041.png?skin_name=chrome" alt="Click here to lend your support to: Doxygen based Lua binder (Dub) and make a donation at www.pledgie.com !"></a></p>

<h1>Features</h1>

<p>Currently, the parser supports:</p>

<ul>
<li>public methods</li>
<li>public attributes read/write</li>
<li>pseudo-attributes read/write by calling getter/setter methods.</li>
<li>custom bindings (for methods and global functions).</li>
<li>custom read/write attributes (with void *userdata helper, union handling)</li>
<li>public class methods</li>
<li>public static attributes read/write</li>
<li>pointer to member (gc protected)</li>
<li>cast(default)/copy/disable const attribute</li>
<li>member pointer assignment (gc protected)</li>
<li>natural casting from std::string to string type (can include '\0')</li>
<li>class instantiation from templates through typedefs</li>
<li>class alias through typedefs</li>
<li>bindings for superclass</li>
<li>automatic casting to base class</li>
<li>default argument values</li>
<li>overloaded functions with optimized method selection from arguments</li>
<li>operator overloading (even operator[], operator() and operator+= and such)</li>
<li>return value optimization (no copy)</li>
<li>simple type garbage collection optimization (no __gc method)</li>
<li>namespace</li>
<li>nested classes</li>
<li>class enums</li>
<li>global enums</li>
<li>build system</li>
<li>group multiple bindings in a single library</li>
<li>rewrite class or library names</li>
<li>native Lua table wrapping setmetatable({super = obj}, Vect)</li>
<li>callback from C++ with error handling in Lua.</li>
<li>fully tested</li>
</ul><h1>TODO</h1>

<ul>
<li>documentation</li>
</ul><h1>Usage</h1>

<p>Create an inspector that will inspect a list of headers given by 'INPUT' (a list
of files and directories. You need to have Doxygen installed</p>

<pre><code>local ins = dub.Inspector {
  INPUT    = 'foo/include',
  -- optional
  DOXYGEN_CMD = 'path/to/doxygen',
}
</code></pre>

<p>Create bindings:</p>

<pre><code>local binder = dub.LuaBinder()

binder:bind(ins, {
  output_directory = 'tmp',
})
</code></pre>

<p>You should now have a 'cpp' file for each class in tmp.</p>

<p>Example to build a class called 'Vect':</p>

<pre><code>binder:build {
  work_dir = '.',
  output   = 'tmp/Vect.so',
  inputs   = {
    'tmp/dub/dub.cpp',
    'tmp/Vect.cpp',
    'fixtures/pointers/vect.cpp',
  },
  includes = {
    'tmp',
    'foo/include',
  },
}     
</code></pre>

<p>You can now use your class:</p>

<pre><code>package.cpath = package.cpath .. 'tmp/?.so;'
require 'Vect'
local v = Vect(1,3)
v.x = 4
print(v.x)
-- etc
</code></pre>

<p>Please read the tests for more detail until the documentation is updated.</p>

<h1>Things to know</h1>

<p>The bindings are made to look as close as possible to the C++ versions. This means that constructors look like C++: Vect(1, 2). Behind the hood, this is resolved as a call to Vect.new(1,2). By storing the 'new' function in a local variable, you can remove this small overhead.</p>

<p>Lua bindings usage examples:</p>

<pre><code>-- Create a Car instance, Car.Noisy is a constant defined in a C++ enum.
local car = Car('my car', Car.Noisy)

-- Execute the C++ 'brandName' method.
print(car:brandName())

-- Set the name of the car (public C++ attribute, a std::string here).
car.name = 'my old car'

-- Get the std::string name
print(car.name)

-- You can store \0 in strings
car.name = 'my old car\0which I did not like'

-- Create a vector
local v1 = Vect(1,2)
local v2 = Vect(4,5)

-- Calls the overloaded operator+(). This is return value optimized to allocate a single Vect.
local v3 = v1 + v2

-- operator*(double d)
v3 = v1 * 4

-- cross product
-- operator*(const Vect &amp;v)
print(v3 * Vect(1,2))
</code></pre>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/lubyk">lubyk</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>